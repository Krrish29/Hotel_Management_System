<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Room - Hotel ESSENTIA PREMIER </title>
    <link rel="stylesheet" th:href="@{/css/booking-form.css}">
</head>

<body>

    <header class="header">
        <div class="header-inner">
            <a href="/" class="logo">Hotel ESSENTIA PREMIER </a>
            <nav class="nav">
                <a href="/" class="nav-btn">Home</a>
                <a href="/admin/login" class="nav-btn">Admin Login</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <a href="/" class="back-button">← Back to Rooms</a>
        <h1 class="page-title">Book Your Room</h1>

        <div class="rooms-grid">
            <div class="card booking-summary">
                <h3>Room Details</h3>
                <div class="summary-item">
                    <span>Room Number:</span>
                    <span th:text="${room.roomNumber}">101</span>
                </div>
                <div class="summary-item">
                    <span>Room Type:</span>
                    <span th:text="${room.roomType}">Deluxe Suite</span>
                </div>
                <div class="summary-item">
                    <span>Capacity:</span>
                    <span th:text="${room.capacity} + ' Guests'">2 Guests</span>
                </div>
                <div class="summary-item">
                    <span>Price per Night:</span>
                    <span th:text="'INR ' + ${#numbers.formatDecimal(room.pricePerNight, 1, 2)}">INR 15,000.00</span>
                </div>
            </div>

            <div class="card booking-form">
                <h2>Guest Information</h2>
                <form action="/book" method="post">
                    <input type="hidden" name="roomId" th:value="${room.id}">

                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" name="guestName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>Phone Number *</label>
                        <input type="tel" name="guestPhone" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="guestEmail" class="form-control">
                    </div>

                    <div class="form-group">
                        <label>Address</label>
                        <textarea name="guestAddress" class="form-control" rows="3"></textarea>
                    </div>

                    <h2>Booking Details</h2>

                    <div class="form-group">
                        <label>Check-in Date *</label>
                        <input type="date" id="checkInDate" name="checkInDate" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>Check-out Date *</label>
                        <input type="date" id="checkOutDate" name="checkOutDate" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>Number of Guests *
                            <span class="tooltip" title="Maximum guests allowed: 2">ℹ️</span>
                        </label>
                        <input type="number" name="numberOfGuests" class="form-control" min="1"
                            th:max="${room.capacity}" required>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">Confirm Booking</button>
                        <a href="/" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-inner">
            <p>© 2026 Hotel ALAKAMANADAWA</p>
        </div>
    </footer>

    <script>
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('checkInDate').setAttribute('min', today);
        document.getElementById('checkOutDate').setAttribute('min', today);

        document.getElementById('checkInDate').addEventListener('change', function () {
            const d = new Date(this.value);
            d.setDate(d.getDate() + 1);
            document.getElementById('checkOutDate').setAttribute('min', d.toISOString().split('T')[0]);
        });
    </script>

</body>

</html>